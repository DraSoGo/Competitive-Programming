#include<bits/stdc++.h>
using namespace std;
main()
{
    long long a,b,aa = 0,bb = 0;
    cin >> a >> b;
    long long k = a - 1,l = b - 1;
    char A[3][(3*a) + a],B[3][(3*b) + b];
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < (3*a) + a; j++)
        {
            cin.get(A[i][j]);
        }
    }
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < (3*b) + b; j++)
        {
            cin.get(B[i][j]);
        }
    }
    for (int i = 1; i < (3*a) + a; i = i + 3)
    {
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == ' ' && A[1][i+2] == '|' && 
            A[2][i] == '|' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 0*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == ' ' && A[0][i+2] == ' ' &&
            A[1][i] == ' ' && A[1][i+1] == ' ' && A[1][i+2] == '|' && 
            A[2][i] == ' ' && A[2][i+1] == ' ' && A[2][i+2] == '|' )
        {
            aa = aa + 1*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == ' ' && A[1][i+1] == '_' && A[1][i+2] == '|' && 
            A[2][i] == '|' && A[2][i+1] == '_' && A[2][i+2] == ' ' )
        {
            aa = aa + 2*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == ' ' && A[1][i+1] == '_' && A[1][i+2] == '|' && 
            A[2][i] == ' ' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 3*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == ' ' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == '_' && A[1][i+2] == '|' && 
            A[2][i] == ' ' && A[2][i+1] == ' ' && A[2][i+2] == '|' )
        {
            aa = aa + 4*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == '_' && A[1][i+2] == ' ' && 
            A[2][i] == ' ' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 5*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == '_' && A[1][i+2] == ' ' && 
            A[2][i] == '|' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 6*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == ' ' && A[1][i+1] == ' ' && A[1][i+2] == '|' && 
            A[2][i] == ' ' && A[2][i+1] == ' ' && A[2][i+2] == '|' )
        {
            aa = aa + 7*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == '_' && A[1][i+2] == '|' && 
            A[2][i] == '|' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 8*pow(10,k);
        }
        if (A[0][i] == ' ' && A[0][i+1] == '_' && A[0][i+2] == ' ' &&
            A[1][i] == '|' && A[1][i+1] == '_' && A[1][i+2] == '|' && 
            A[2][i] == ' ' && A[2][i+1] == '_' && A[2][i+2] == '|' )
        {
            aa = aa + 9*pow(10,k);
        }
        i++;
        k--;
    }
    for (int i = 1; i < (3*b) + b; i = i + 3)
    {
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == ' ' && B[1][i+2] == '|' && 
            B[2][i] == '|' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 0*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == ' ' && B[0][i+2] == ' ' &&
            B[1][i] == ' ' && B[1][i+1] == ' ' && B[1][i+2] == '|' && 
            B[2][i] == ' ' && B[2][i+1] == ' ' && B[2][i+2] == '|' )
        {
            bb = bb + 1*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == ' ' && B[1][i+1] == '_' && B[1][i+2] == '|' && 
            B[2][i] == '|' && B[2][i+1] == '_' && B[2][i+2] == ' ' )
        {
            bb = bb + 2*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == ' ' && B[1][i+1] == '_' && B[1][i+2] == '|' && 
            B[2][i] == ' ' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 3*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == ' ' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == '_' && B[1][i+2] == '|' && 
            B[2][i] == ' ' && B[2][i+1] == ' ' && B[2][i+2] == '|' )
        {
            bb = bb + 4*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == '_' && B[1][i+2] == ' ' && 
            B[2][i] == ' ' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 5*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == '_' && B[1][i+2] == ' ' && 
            B[2][i] == '|' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 6*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == ' ' && B[1][i+1] == ' ' && B[1][i+2] == '|' && 
            B[2][i] == ' ' && B[2][i+1] == ' ' && B[2][i+2] == '|' )
        {
            bb = bb + 7*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == '_' && B[1][i+2] == '|' && 
            B[2][i] == '|' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 8*pow(10,l);
        }
        if (B[0][i] == ' ' && B[0][i+1] == '_' && B[0][i+2] == ' ' &&
            B[1][i] == '|' && B[1][i+1] == '_' && B[1][i+2] == '|' && 
            B[2][i] == ' ' && B[2][i+1] == '_' && B[2][i+2] == '|' )
        {
            bb = bb + 9*pow(10,l);
        }
        i++;
        l--;
    }
    cout << aa + bb;
}